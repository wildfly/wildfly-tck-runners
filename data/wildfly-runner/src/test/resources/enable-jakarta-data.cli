# This CLI script allows to enable Jakarta Data for the standalone configurations.
# By default, standalone.xml is updated.
# Run it from JBOSS_HOME as:
# bin/jboss-cli.sh --file=docs/examples/enable-microprofile.cli [-Dconfig=<standalone-full.xml|standalone-ha.xml|standalone-full-ha.xml>]

embed-server --server-config=${config:standalone.xml} --stability=preview

if (outcome != success) of /subsystem=jakarta-data:read-resource
  /extension=org.wildfly.extension.jakarta.data:add
  /subsystem=jakarta-data:add
else
  echo INFO: jakarta-data already in configuration, subsystem not added.
end-if

echo INFO: Configuration done.

stop-embedded-server
